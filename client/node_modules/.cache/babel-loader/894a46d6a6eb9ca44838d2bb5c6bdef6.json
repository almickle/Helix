{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\micha\\\\OneDrive\\\\Documents\\\\Code\\\\helix-app\\\\client\\\\src\\\\components\\\\views\\\\sequence-header\\\\AnnotationHandler.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Note from '../Note';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AnnotationHandler(_ref) {\n  _s();\n\n  let {\n    annotations,\n    annotationText\n  } = _ref;\n  const [paintbrushColor, setPaintbrushColor] = useState();\n  const [bookColor, setBookColor] = useState(); // enable annotating\n\n  useEffect(() => {\n    if (isAnnotating === true) {\n      setPaintbrushColor('white');\n    } else {\n      setPaintbrushColor('unset');\n    }\n  }, [isAnnotating]);\n\n  function toggleAnnotations() {\n    setAnnotationToggle(!annotationToggle);\n  }\n\n  function showAnnotations(annotations) {\n    const basepairIDs = [];\n    annotations.forEach(annotation => {\n      for (let i = annotation.begin; i <= annotation.end; i++) {\n        basepairIDs.push(i);\n      }\n    });\n    basepairIDs.forEach(id => {\n      document.getElementById(id).style.backgroundColor = 'yellow';\n    });\n  }\n\n  function hideAnnotations(annotations) {\n    const basepairIDs = [];\n    setAnnotationText(null);\n    annotations.forEach(annotation => {\n      for (let i = annotation.begin; i <= annotation.end; i++) {\n        basepairIDs.push(i);\n      }\n    });\n    basepairIDs.forEach(id => {\n      if (document.getElementById(id)) {\n        document.getElementById(id).style.backgroundColor = 'unset';\n      }\n    });\n  }\n\n  useEffect(() => {\n    if (annotationToggle === true) {\n      setBookColor('white');\n      showAnnotations(annotations);\n    } else {\n      setBookColor('unset');\n      hideAnnotations(annotations);\n    } // eslint-disable-next-line\n\n  }, [annotationToggle, annotations]);\n\n  function showNote(event) {\n    if (event.target.className === 'bp') {\n      annotations.forEach(annotation => {\n        const basepairIDs = [];\n\n        for (let i = annotation.begin; i <= annotation.end; i++) {\n          basepairIDs.push(i);\n        }\n\n        basepairIDs.forEach(id => {\n          if (parseInt(event.target.id) === id) {\n            setAnnotationText( /*#__PURE__*/_jsxDEV(Note, {\n              basepairs: basepairIDs,\n              content: annotation\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 39\n            }, this));\n          }\n        });\n      });\n    } else {\n      setAnnotationText(null);\n    }\n  }\n\n  useEffect(() => {\n    // bug: remove event listener when gene changes\n    if (annotationToggle === true) {\n      document.addEventListener('click', showNote);\n    }\n\n    return () => {\n      document.removeEventListener('click', showNote);\n    }; // eslint-disable-next-line\n  }, [annotationToggle]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '100%',\n      width: 'fit-content'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100%',\n        paddingLeft: 12,\n        paddingRight: 12,\n        backgroundColor: bookColor\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        onClick: toggleAnnotations,\n        src: BookIcon,\n        style: {\n          height: '72%',\n          cursor: 'pointer'\n        },\n        alt: \"paint icon: make an annotation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 174\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100%',\n        paddingLeft: 6,\n        paddingRight: 6,\n        backgroundColor: paintbrushColor\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        onClick: handleAddAnnotation,\n        src: PaintBrush,\n        style: {\n          height: '115%',\n          cursor: 'pointer'\n        },\n        alt: \"paint icon: make an annotation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 177\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), annotationText]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AnnotationHandler, \"7bjYxH3JzZ8QhEjfUE9IxlGQ+Bs=\");\n\n_c = AnnotationHandler;\n\nvar _c;\n\n$RefreshReg$(_c, \"AnnotationHandler\");","map":{"version":3,"names":["useState","useEffect","Note","AnnotationHandler","annotations","annotationText","paintbrushColor","setPaintbrushColor","bookColor","setBookColor","isAnnotating","toggleAnnotations","setAnnotationToggle","annotationToggle","showAnnotations","basepairIDs","forEach","annotation","i","begin","end","push","id","document","getElementById","style","backgroundColor","hideAnnotations","setAnnotationText","showNote","event","target","className","parseInt","addEventListener","removeEventListener","height","width","display","alignItems","justifyContent","paddingLeft","paddingRight","BookIcon","cursor","handleAddAnnotation","PaintBrush"],"sources":["C:/Users/micha/OneDrive/Documents/Code/helix-app/client/src/components/views/sequence-header/AnnotationHandler.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport Note from '../Note'\r\n\r\nexport default function AnnotationHandler ( { annotations, annotationText } ) {\r\n\r\n    const [paintbrushColor, setPaintbrushColor] = useState()\r\n    const [bookColor, setBookColor] = useState()\r\n\r\n\r\n// enable annotating\r\nuseEffect(() => {\r\n    if(isAnnotating === true) {\r\n       setPaintbrushColor('white')\r\n    } \r\n    else {\r\n        setPaintbrushColor('unset')\r\n    }\r\n}, [isAnnotating])\r\n\r\n\r\nfunction toggleAnnotations () {\r\n    setAnnotationToggle(!annotationToggle)\r\n}\r\n\r\nfunction showAnnotations(annotations) {\r\n    const basepairIDs = []\r\n    annotations.forEach((annotation) => {\r\n        for(let i=annotation.begin; i <= annotation.end; i++) {\r\n            basepairIDs.push(i)\r\n        }\r\n    })\r\n    basepairIDs.forEach((id) => {\r\n        document.getElementById(id).style.backgroundColor = 'yellow'\r\n    })\r\n}\r\n\r\nfunction hideAnnotations(annotations) {\r\n    const basepairIDs = []\r\n    setAnnotationText(null)\r\n    annotations.forEach((annotation) => {\r\n        for(let i=annotation.begin; i <= annotation.end; i++) {\r\n            basepairIDs.push(i)\r\n        }\r\n    })\r\n    basepairIDs.forEach((id) => {\r\n        if(document.getElementById(id)) {\r\n            document.getElementById(id).style.backgroundColor = 'unset'\r\n        }\r\n    })\r\n}\r\n\r\nuseEffect(() => {\r\n    if(annotationToggle === true) {\r\n        setBookColor('white')\r\n        showAnnotations(annotations)\r\n    } \r\n    else {\r\n        setBookColor('unset')\r\n        hideAnnotations(annotations)\r\n    }\r\n    // eslint-disable-next-line\r\n}, [annotationToggle, annotations])\r\n\r\n\r\nfunction showNote(event) {\r\n    if(event.target.className === 'bp') {\r\n        annotations.forEach((annotation) => {\r\n            const basepairIDs = []\r\n            for(let i=annotation.begin; i <= annotation.end; i++) {\r\n                basepairIDs.push(i)\r\n            }\r\n            basepairIDs.forEach((id) => {\r\n                if(parseInt(event.target.id) === id) {\r\n                    setAnnotationText(<Note basepairs={basepairIDs} content={annotation}/>)\r\n                }\r\n            })                 \r\n        })\r\n    }\r\n    else {\r\n        setAnnotationText(null)\r\n    }\r\n}\r\n\r\nuseEffect(() => { // bug: remove event listener when gene changes\r\n    if(annotationToggle === true) {\r\n        document.addEventListener('click', showNote)\r\n    } \r\n    return () => {\r\n        document.removeEventListener('click', showNote)\r\n    }\r\n    // eslint-disable-next-line\r\n}, [annotationToggle])\r\n\r\n    return (\r\n        <div style={{ height: '100%', width: 'fit-content' }}>\r\n            <span style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%', paddingLeft: 12, paddingRight: 12, backgroundColor: bookColor }}><img onClick={toggleAnnotations} src={BookIcon} style={{ height: '72%', cursor: 'pointer' }} alt=\"paint icon: make an annotation\" /> </span>\r\n            <span style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%', paddingLeft: 6, paddingRight: 6, backgroundColor: paintbrushColor}}><img onClick={handleAddAnnotation} src={PaintBrush} style={{ height: '115%', cursor: 'pointer' }} alt=\"paint icon: make an annotation\" /> </span>\r\n            {annotationText}\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}